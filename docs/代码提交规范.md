# 代码提交规范

## Git Flow

本项目使用 Git Flow 的规范流程来管理项目的版本管理、代码协作。

## 开发流程

开发过程中大部分时间请使用 feature/* 来命名分支名称，从 develop 分支 checkout 新分支，提 Pull Request 时，也需要将分支合入 develop 分支。

他人 Code review 时，如果没问题请在 `Files changed` 中的 `Review changes` 中 Approve 这个 Pull Request，并在 `Review summary` 中给出 LGTM 表示通过。

本项目中，一个 Pull Request 中需要至少两个 LGTM 才能被 Merge，其中一个 LGTM 是表示文档 typo 格式通过的，另一个 LGTM 是表示内容通过的。

## Commit Message

每条 commit message 包含 **头部**, **正文** 和 **注脚**。其中头部的格式比较特殊，由 **类型**,  **作用范围** 和 **主题** 组成:

```
<类型>(<作用范围>): <主题>
<空行>
<正文>
<空行>
<注脚>
```

这里 **头部** 是强制的，不可缺省，但其中的 **作用范围** 是可选的。

commit message 中每行不可超过 100 个字符，这样的格式方便在 Github 或其他工具上阅读。（事实上 Github 会把过长的头部拆开，多出的部分会被放到正文部分。）

### 类型

必须是下述列表中的一项:

* **feat**: 新功能
* **fix**: 修复bug
* **perf**: 性能优化方面的代码
* **docs**: 单纯的文档内容的改动
* **style**: 不影响代码含义或功能的修改（比如代码格式等）
* **refactor**: 既不是 bug 修复也不是功能添加的代码，如：重构
* **test**: 测试补全
* **chore**: 杂项，比如代码构建流程、辅助工具等的修改


### 作用范围

**作用范围** 并没有严格的书写限制，能表明代码改动的区域就可以，比如 `JS`, `CSS`, `CS`, `DOC` 等等。

### 主题

关于 **主题** 的写法，最简单有效的方式是看看它这下面这段话中是否意义明确:

```
如果生效，本次提交将__________
```

### 正文

正文部分写这次改动的动机，可以不写。

### 注脚

如果有需要，注脚应该包含关于「不兼容改动（Breaking Changes）」的信息，另外也可作为 **hook** 功能。比如 `Closes #999` 将关闭 Github 上的第 999 号 issue。

如果有 **不兼容改动**，书写时应该以 `BREAKING CHANGE: ` 开头，后面紧跟一个空格或两个空白行。

**本篇源于即将诞生的 DaoCloud 前端生存指南之代码提交篇，未经允许请勿转载**